"use strict";(self.webpackChunktodo_list=self.webpackChunktodo_list||[]).push([[792],{5:()=>{class e{constructor(e,t="",n=null,a="medium"){this.title=e,this.description=t,this.dueDate=n,this.priority=a,this.id=Date.now()+Math.random().toString(36).slice(2),this.completed=!1,this.createdAt=new Date,this.updatedAt=new Date,this.projectId=null,this.notes="",this.checklist=[],this.tags=[],this.reminder=null,this.recurring=!1,this.attachments=[]}toJSON(){return{id:this.id,title:this.title,description:this.description,dueDate:this.dueDate?this.dueDate.toISOString():null,priority:this.priority,notes:this.notes,reminder:this.reminder,completed:this.completed,createdAt:this.createdAt.toISOString(),updatedAt:this.updatedAt?this.updatedAt.toISOString():null,projectId:this.projectId,checklist:this.checklist,tags:this.tags,recurring:this.recurring,attachments:this.attachments}}static fromJSON(t){const n=new e(t.title,t.description,t.dueDate?new Date(t.dueDate):null,t.priority);return n.id=t.id,n.priority=t.priority,n.completed=t.completed,n.dueDate=t.dueDate?new Date(t.dueDate):null,n.createdAt=new Date(t.createdAt),n.updatedAt=new Date(t.updatedAt),n.reminder=t.reminder?new Date(t.reminder):null,n.notes=t.notes||"",n.checklist=t.checklist||[],n.tags=t.tags||[],n.projectId=t.projectId||null,n.recurring=t.recurring||!1,n.attachments=t.attachments||[],n}}class t{constructor(e){this.name=e,this.todos=[],this.id=Date.now()+Math.random().toString(36).slice(2),this.createdAt=new Date}addTodo(e){return this.todos.push(e),e}getTodoById(e){return this.todos.find(t=>t.id===e)}removeTodo(e){const t=this.todos.findIndex(t=>t.id===e);return-1!==t&&(this.todos.splice(t,1),!0)}toggleTodoComplete(e){const t=this.getTodoById(e);return!!t&&(t.completed=!t.completed,t.updatedAt=new Date,!0)}toJSON(){return{id:this.id,name:this.name,todos:this.todos.map(e=>e.toJSON()),createdAt:this.createdAt.toISOString()}}static fromJSON(n){const a=new t(n.name);return a.id=n.id,a.createdAt=new Date(n.createdAt),a.todos=n.todos.map(t=>e.fromJSON(t)),a}}class n{constructor(){this.projects=[],this.defaultProject=new t("Inbox"),this.currentProject=this.defaultProject,this.projects.push(this.defaultProject)}addProject(e){const n=new t(e);return this.projects.push(n),n}getProjectById(e){return this.projects.find(t=>t.id===e)}setCurrentProject(e){const t=this.getProjectById(e);return!!t&&(this.currentProject=t,!0)}deleteProject(e){if(e===this.defaultProject.id)return console.warn("No se puede eliminar el proyecto Inbox"),!1;const t=this.projects.findIndex(t=>t.id===e);return-1===t?(console.warn("Proyecto no encontrado"),!1):(this.projects.splice(t,1),this.currentProject.id===e&&(this.currentProject=this.defaultProject),!0)}toJSON(){return{projects:this.projects.map(e=>e.toJSON()),defaultProjectId:this.defaultProject.id,currentProjectId:this.currentProject.id}}static fromJSON(e){const a=new n;return a.projects=[],a.projects=e.projects.map(e=>t.fromJSON(e)),a.defaultProject=a.projects.find(t=>t.id===e.defaultProjectId)||a.projects[0],a.currentProject=a.projects.find(t=>t.id===e.currentProjectId)||a.defaultProject,a}}const a="todo-app-data";function o(e){try{return localStorage.setItem(a,JSON.stringify(e)),!0}catch(e){return console.error("Error GUARDANDO en localStorage:",e),!1}}const r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function i(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const s={date:i({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:i({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:i({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},d={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function c(e){return(t,n)=>{let a;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,o=n?.width?String(n.width):t;a=e.formattingValues[o]||e.formattingValues[t]}else{const t=e.defaultWidth,o=n?.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function l(e){return(t,n={})=>{const a=n.width,o=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],r=t.match(o);if(!r)return null;const i=r[0],s=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(s)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}(s,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}(s,e=>e.test(i));let c;return c=e.valueCallback?e.valueCallback(d):d,c=n.valueCallback?n.valueCallback(c):c,{value:c,rest:t.slice(i.length)}}}function u(e){return(t,n={})=>{const a=t.match(e.matchPattern);if(!a)return null;const o=a[0],r=t.match(e.parsePattern);if(!r)return null;let i=e.valueCallback?e.valueCallback(r[0]):r[0];return i=n.valueCallback?n.valueCallback(i):i,{value:i,rest:t.slice(o.length)}}}const m={code:"en-US",formatDistance:(e,t,n)=>{let a;const o=r[e];return a="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a},formatLong:s,formatRelative:(e,t,n,a)=>d[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:c({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:c({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:c({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:c({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:c({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:u({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:l({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:l({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:l({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:l({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:l({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let h={};function f(){return h}Math.pow(10,8);const p=6048e5,g=Symbol.for("constructDateFrom");function y(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&g in e?e[g](t):e instanceof Date?new e.constructor(t):new Date(t)}function w(e,t){return y(t||e,e)}function b(e){const t=w(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function v(e,...t){const n=y.bind(null,e||t.find(e=>"object"==typeof e));return t.map(n)}function P(e,t){const n=w(e,t?.in);return n.setHours(0,0,0,0),n}function M(e,t){const n=w(e,t?.in);return function(e,t,n){const[a,o]=v(n?.in,e,t),r=P(a),i=P(o),s=+r-b(r),d=+i-b(i);return Math.round((s-d)/864e5)}(n,function(e,t){const n=w(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n))+1}function j(e,t){const n=f(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=w(e,t?.in),r=o.getDay(),i=(r<a?7:0)+r-a;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function T(e,t){return j(e,{...t,weekStartsOn:1})}function E(e,t){const n=w(e,t?.in),a=n.getFullYear(),o=y(n,0);o.setFullYear(a+1,0,4),o.setHours(0,0,0,0);const r=T(o),i=y(n,0);i.setFullYear(a,0,4),i.setHours(0,0,0,0);const s=T(i);return n.getTime()>=r.getTime()?a+1:n.getTime()>=s.getTime()?a:a-1}function D(e,t){const n=w(e,t?.in),a=+T(n)-+function(e,t){const n=E(e,t),a=y(t?.in||e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),T(a)}(n);return Math.round(a/p)+1}function k(e,t){const n=w(e,t?.in),a=n.getFullYear(),o=f(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,i=y(t?.in||e,0);i.setFullYear(a+1,0,r),i.setHours(0,0,0,0);const s=j(i,t),d=y(t?.in||e,0);d.setFullYear(a,0,r),d.setHours(0,0,0,0);const c=j(d,t);return+n>=+s?a+1:+n>=+c?a:a-1}function S(e,t){const n=w(e,t?.in),a=+j(n,t)-+function(e,t){const n=f(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=k(e,t),r=y(t?.in||e,0);return r.setFullYear(o,0,a),r.setHours(0,0,0,0),j(r,t)}(n,t);return Math.round(a/p)+1}function x(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const C={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return x("yy"===t?a%100:a,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):x(n+1,2)},d:(e,t)=>x(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>x(e.getHours()%12||12,t.length),H:(e,t)=>x(e.getHours(),t.length),m:(e,t)=>x(e.getMinutes(),t.length),s:(e,t)=>x(e.getSeconds(),t.length),S(e,t){const n=t.length,a=e.getMilliseconds();return x(Math.trunc(a*Math.pow(10,n-3)),t.length)}},I={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return n.ordinalNumber(a,{unit:"year"})}return C.y(e,t)},Y:function(e,t,n,a){const o=k(e,a),r=o>0?o:1-o;return"YY"===t?x(r%100,2):"Yo"===t?n.ordinalNumber(r,{unit:"year"}):x(r,t.length)},R:function(e,t){return x(E(e),t.length)},u:function(e,t){return x(e.getFullYear(),t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return x(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return x(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return C.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return x(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const o=S(e,a);return"wo"===t?n.ordinalNumber(o,{unit:"week"}):x(o,t.length)},I:function(e,t,n){const a=D(e);return"Io"===t?n.ordinalNumber(a,{unit:"week"}):x(a,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):C.d(e,t)},D:function(e,t,n){const a=M(e);return"Do"===t?n.ordinalNumber(a,{unit:"dayOfYear"}):x(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const o=e.getDay(),r=(o-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return x(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const o=e.getDay(),r=(o-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return x(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),o=0===a?7:a;switch(t){case"i":return String(o);case"ii":return x(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let o;switch(o=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let o;switch(o=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return C.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):C.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return"Ko"===t?n.ordinalNumber(a,{unit:"hour"}):x(a,t.length)},k:function(e,t,n){let a=e.getHours();return 0===a&&(a=24),"ko"===t?n.ordinalNumber(a,{unit:"hour"}):x(a,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):C.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):C.s(e,t)},S:function(e,t){return C.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return B(a);case"XXXX":case"XX":return W(a);default:return W(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return B(a);case"xxxx":case"xx":return W(a);default:return W(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+L(a,":");default:return"GMT"+W(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+L(a,":");default:return"GMT"+W(a,":")}},t:function(e,t,n){return x(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return x(+e,t.length)}};function L(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),o=Math.trunc(a/60),r=a%60;return 0===r?n+String(o):n+String(o)+t+x(r,2)}function B(e,t){return e%60==0?(e>0?"-":"+")+x(Math.abs(e)/60,2):W(e,t)}function W(e,t=""){const n=e>0?"-":"+",a=Math.abs(e);return n+x(Math.trunc(a/60),2)+t+x(a%60,2)}const N=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},F=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},A={p:F,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],o=n[2];if(!o)return N(e,t);let r;switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",N(a,t)).replace("{{time}}",F(o,t))}},O=/^D+$/,H=/^Y+$/,$=["D","DD","YY","YYYY"];function q(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+w(e)));var t}const Y=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,z=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,J=/^'([^]*?)'?$/,X=/''/g,G=/[a-zA-Z]/;function Q(e,t,n){const a=f(),o=n?.locale??a.locale??m,r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,s=w(e,n?.in);if(!q(s))throw new RangeError("Invalid time value");let d=t.match(z).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,A[t])(e,o.formatLong):e}).join("").match(Y).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:R(e)};if(I[t])return{isToken:!0,value:e};if(t.match(G))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});o.localize.preprocessor&&(d=o.localize.preprocessor(s,d));const c={firstWeekContainsDate:r,weekStartsOn:i,locale:o};return d.map(a=>{if(!a.isToken)return a.value;const r=a.value;return(!n?.useAdditionalWeekYearTokens&&function(e){return H.test(e)}(r)||!n?.useAdditionalDayOfYearTokens&&function(e){return O.test(e)}(r))&&function(e,t,n){const a=function(e,t,n){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(a),$.includes(e))throw new RangeError(a)}(r,t,String(e)),(0,I[r[0]])(s,r,o.localize,c)}).join("")}function R(e){const t=e.match(J);return t?t[1].replace(X,"'"):e}function U(e){return y(e,Date.now())}function V(e,t,n){const[a,o]=v(n?.in,e,t);return+P(a)===+P(o)}function _(e,t){return V(e,function(e,t,n){const a=w(e,n?.in);return isNaN(t)?y(n?.in||e,NaN):t?(a.setDate(a.getDate()+t),a):a}(U(t?.in||e),1),t)}const K={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 d√≠a",other:"{{count}} d√≠as"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 a√±o",other:"alrededor de {{count}} a√±os"},xYears:{one:"1 a√±o",other:"{{count}} a√±os"},overXYears:{one:"m√°s de 1 a√±o",other:"m√°s de {{count}} a√±os"},almostXYears:{one:"casi 1 a√±o",other:"casi {{count}} a√±os"}},Z={date:i({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:i({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:i({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ee={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'ma√±ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},te={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'ma√±ana a las' p",nextWeek:"eeee 'a las' p",other:"P"},ne={code:"es",formatDistance:(e,t,n)=>{let a;const o=K[e];return a="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"en "+a:"hace "+a:a},formatLong:Z,formatRelative:(e,t,n,a)=>1!==t.getHours()?te[e]:ee[e],localize:{ordinalNumber:(e,t)=>Number(e)+"¬∫",era:c({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despu√©s de cristo"]},defaultWidth:"wide"}),quarter:c({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1¬∫ trimestre","2¬∫ trimestre","3¬∫ trimestre","4¬∫ trimestre"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:c({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:c({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s√°"],abbreviated:["dom","lun","mar","mi√©","jue","vie","s√°b"],wide:["domingo","lunes","martes","mi√©rcoles","jueves","viernes","s√°bado"]},defaultWidth:"wide"}),dayPeriod:c({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"ma√±ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"ma√±ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"ma√±ana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la ma√±ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la ma√±ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la ma√±ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:u({matchPattern:/^(\d+)(¬∫)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:l({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u√∫]n|despu[e√©]s de cristo|era com[u√∫]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u√∫]n)/i,/^(despu[e√©]s de cristo|era com[u√∫]n)/i]},defaultParseWidth:"any"}),quarter:l({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](¬∫)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:l({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:l({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[√°a])/i,abbreviated:/^(dom|lun|mar|mi[√©e]|jue|vie|s[√°a]b)/i,wide:/^(domingo|lunes|martes|mi[√©e]rcoles|jueves|viernes|s[√°a]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:l({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (ma√±ana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (ma√±ana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/ma√±ana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};class ae{constructor(e){this.todoApp=e,this.currentProject=e.currentProject,this.filters={searchText:"",status:"all",priority:""},this.elements={projectsList:document.getElementById("projectsList"),currentProjectTitle:document.getElementById("currentProjectTitle"),todosContainer:document.getElementById("todosContainer"),totalTodos:document.getElementById("totalTodos"),completedTodos:document.getElementById("completedTodos"),emptyState:document.getElementById("emptyState"),detailPanel:document.getElementById("detailPanel"),detailContent:document.getElementById("detailContent"),searchInput:document.getElementById("searchInput"),priorityFilter:document.getElementById("priorityFilter"),newProjectBtn:document.getElementById("newProjectBtn"),newTodoBtn:document.getElementById("newTodoBtn"),closeDetailBtn:document.getElementById("closeDetailBtn"),filterButtons:document.querySelectorAll(".filter-btn"),filtersBar:document.querySelector(".filters-bar")},this.init()}init(){console.log("‚úÖ UIManager inicializado"),this.renderProjects(),this.renderTodos(),this.setupEventListeners()}renderProjects(){const{projectsList:e}=this.elements,{projects:t,currentProject:n}=this.todoApp;e.innerHTML="",t.forEach(t=>{const a=this.createProjectElement(t);e.appendChild(a),t.id===n.id&&a.classList.add("active")})}createProjectElement(e){const t=document.createElement("div");t.className="project-item",t.dataset.projectId=e.id;const n=this.getProjectIcon(e.name);return t.innerHTML=`\n            <i class="fas fa-${n}"></i>\n            <span>${e.name}</span>\n            <span class="badge">${e.todos.length}</span>\n        `,t.addEventListener("click",()=>{this.switchProject(e.id)}),t}getProjectIcon(e){const t={inbox:"inbox",trabajo:"briefcase",personal:"home",estudio:"graduation-cap",compras:"shopping-cart",salud:"heartbeat",viajes:"plane"},n=e.toLowerCase();for(const[e,a]of Object.entries(t))if(n.includes(e))return a;return"folder"}renderTodos(e=null){const{todosContainer:t,emptyState:n,totalTodos:a,completedTodos:o}=this.elements,r=this.currentProject.todos,i=e||r,s=r.length,d=r.filter(e=>e.completed).length,c=i.length;if(a.textContent=s,o.textContent=d,0===c){n.style.display="block",t.style.display="none";let e="No hay tareas en este proyecto",a='Crea tu primera tarea haciendo clic en "Nueva Tarea"';(this.filters.searchText||"all"!==this.filters.status||this.filters.priority)&&(e="No se encontraron tareas",a="Prueba con otros filtros",n.innerHTML=`\n                    <i class="fas fa-search"></i>\n                    <h3>${e}</h3>\n                    <p>${a}</p>\n                    <button class="btn-clear-filters" style="margin-top: 10px; padding: 8px 16px; background: #f0f0f0; border: none; border-radius: 4px; cursor: pointer;">\n                        <i class="fas fa-times"></i> Limpiar filtros\n                    </button>\n                `,n.querySelector(".btn-clear-filters").addEventListener("click",()=>{this.clearFilters()}))}else n.style.display="none",t.style.display="block",c<s?this.showFilteredCount(c,s):this.hideFilteredCount();t.innerHTML="",c>0&&i.forEach(e=>{const n=this.createTodoElement(e);t.appendChild(n)})}createTodoElement(e){const t=document.createElement("div");t.className=`todo-item priority-${e.priority}`,t.dataset.todoId=e.id;const n=e.dueDate?function(e,t="medium"){if(!e)return"Sin fecha";const n=new Date(e);switch(t){case"short":default:return Q(n,"dd/MM/yyyy");case"medium":return Q(n,"dd MMM yyyy",{locale:ne});case"long":return Q(n,"dd 'de' MMMM 'de' yyyy",{locale:ne});case"time":return Q(n,"HH:mm")}}(e.dueDate,"medium"):"Sin fecha",a=function(e){if(!e)return null;const t=new Date(e);return function(e,t){return V(y(t?.in||e,e),U(t?.in||e))}(t)?"hoy":_(t)?"ma√±ana":function(e){return+w(e)<Date.now()}(t)?"vencido":"futuro"}(e.dueDate);return t.innerHTML=`\n            <div class="todo-checkbox">\n                <input type="checkbox" id="todo_${e.id}" ${e.completed?"checked":""}>\n                <label for="todo_${e.id}"></label>\n            </div>\n            <div class="todo-content">\n                <div class="todo-header">\n                    <h3 class="todo-title ${e.completed?"completed":""}">${e.title}</h3>\n                    <div class="todo-priority">\n                        <span class="priority-badge ${e.priority}">\n                            ${this.getPriorityText(e.priority)}\n                        </span>\n                    </div>\n                </div>\n                ${e.description?`<p class="todo-description">${e.description}</p>`:""}\n                <div class="todo-footer">\n                    <span class="todo-date ${"vencido"===a?"overdue":""}">\n                        <i class="far fa-calendar"></i>\n                        <span>${n}</span>\n                    </span>\n                    <div class="todo-actions">\n                        <button class="action-btn edit-todo" title="Editar">\n                            <i class="fas fa-edit"></i>\n                        </button>\n                        <button class="action-btn delete delete-todo" title="Eliminar">\n                            <i class="fas fa-trash"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        `,t.querySelector(`#todo_${e.id}`).addEventListener("change",()=>{this.toggleTodoComplete(e.id)}),t.querySelector(".edit-todo").addEventListener("click",t=>{t.stopPropagation(),window.openTodoModalForEdit&&window.openTodoModalForEdit(e)}),t.querySelector(".delete-todo").addEventListener("click",t=>{t.stopPropagation(),this.deleteTodo(e.id)}),t.addEventListener("click",t=>{t.target.closest(".todo-checkbox")||t.target.closest(".todo-actions")||t.target.closest(".priority-badge")||this.showTodoDetail(e)}),t}getPriorityText(e){return{high:"Alta",medium:"Media",low:"Baja"}[e]||e}setupEventListeners(){const{newProjectBtn:e,newTodoBtn:t,closeDetailBtn:n,searchInput:a,priorityFilter:o,filterButtons:r}=this.elements;e.addEventListener("click",()=>{const e=prompt("Nombre del nuevo proyecto:");e&&e.trim()&&this.createProject(e.trim())}),t.addEventListener("click",()=>{this.showNewTodoForm()}),n.addEventListener("click",()=>{this.hideTodoDetail()}),a.addEventListener("input",e=>{this.filters.searchText=e.target.value.toLowerCase().trim(),this.applyFilters()}),o.addEventListener("change",e=>{this.filters.priority=e.target.value,this.applyFilters()}),r.forEach(e=>{e.addEventListener("click",e=>{r.forEach(e=>e.classList.remove("active")),e.target.classList.add("active");const t=e.target.textContent.toLowerCase();let n="all";t.includes("pendientes")?n="pending":t.includes("completadas")&&(n="completed"),this.filters.status=n,this.applyFilters()})})}switchProject(e){this.todoApp.setCurrentProject(e)&&(this.currentProject=this.todoApp.currentProject,this.updateUI())}createProject(e){const t=this.todoApp.addProject(e);this.renderProjects(),this.switchProject(t.id)}toggleTodoComplete(e){this.currentProject.toggleTodoComplete(e),this.applyFilters()}deleteTodo(e){confirm("¬øEliminar esta tarea?")&&this.currentProject.removeTodo(e)&&(this.applyFilters(),this.renderProjects())}showTodoDetail(e){const{detailPanel:t,detailContent:n}=this.elements,a=e=>e?new Date(e).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No establecida",o=e.completed?'<span class="status-completed"><i class="fas fa-check-circle"></i> Completada</span>':'<span class="status-pending"><i class="fas fa-clock"></i> Pendiente</span>';n.innerHTML=`\n            <div class="todo-detail-view">\n                <div class="detail-section">\n                    <h4 class="detail-title">${e.title}</h4>\n                    <div class="detail-meta">\n                        ${o}\n                        <span class="detail-priority priority-${e.priority}">\n                            <i class="fas fa-flag"></i> ${{high:"Alta",medium:"Media",low:"Baja"}[e.priority]||e.priority}\n                        </span>\n                    </div>\n                </div>\n                \n                ${e.description?`\n                <div class="detail-section">\n                    <h5><i class="fas fa-align-left"></i> Descripci√≥n</h5>\n                    <p class="detail-description">${e.description}</p>\n                </div>\n                `:""}\n                \n                <div class="detail-grid">\n                    <div class="detail-section">\n                        <h5><i class="far fa-calendar"></i> Fecha l√≠mite</h5>\n                        <p>${a(e.dueDate)}</p>\n                    </div>\n                    \n                    <div class="detail-section">\n                        <h5><i class="far fa-calendar-plus"></i> Creada</h5>\n                        <p>${a(e.createdAt)}</p>\n                    </div>\n                </div>\n                \n                ${e.notes?`\n                <div class="detail-section">\n                    <h5><i class="fas fa-sticky-note"></i> Notas</h5>\n                    <p class="detail-notes">${e.notes}</p>\n                </div>\n                `:""}\n                \n                ${e.reminder?'\n                <div class="detail-section">\n                    <h5><i class="fas fa-bell"></i> Recordatorio</h5>\n                    <p><i class="fas fa-check"></i> Activado</p>\n                </div>\n                ':""}\n                \n                <div class="detail-actions">\n                    <button class="btn btn-primary edit-from-detail" data-todo-id="${e.id}">\n                        <i class="fas fa-edit"></i> Editar Tarea\n                    </button>\n                    <button class="btn btn-secondary close-detail">\n                        <i class="fas fa-times"></i> Cerrar\n                    </button>\n                </div>\n            </div>\n        `,t.style.display="block",t.classList.add("active"),n.querySelector(".edit-from-detail").addEventListener("click",()=>{window.openTodoModalForEdit&&(window.openTodoModalForEdit(e),this.hideTodoDetail())}),n.querySelector(".close-detail").addEventListener("click",()=>{this.hideTodoDetail()})}hideTodoDetail(){const{detailPanel:e}=this.elements;e.classList.remove("active"),setTimeout(()=>{e.style.display="none"},300)}showNewTodoForm(){const e=document.getElementById("todoModal");e?(e.classList.add("active"),console.log("‚úÖ Modal mostrado")):console.error("‚ùå Modal no encontrado")}applyFilters(){const e=this.currentProject.todos.filter(e=>{const t=!this.filters.searchText||e.title.toLowerCase().includes(this.filters.searchText)||e.description&&e.description.toLowerCase().includes(this.filters.searchText),n="all"===this.filters.status||"pending"===this.filters.status&&!e.completed||"completed"===this.filters.status&&e.completed,a=!this.filters.priority||e.priority===this.filters.priority;return t&&n&&a});this.renderTodos(e)}showFilteredCount(e,t){let n=document.querySelector(".filtered-counter");n||(n=document.createElement("div"),n.className="filtered-counter",this.elements.filtersBar?.appendChild(n)),n.style.display="block",n.innerHTML=`\n            <span class="counter-badge">\n                <i class="fas fa-filter"></i>\n                Mostrando ${e} de ${t} tareas\n                <button class="clear-filters-btn" title="Limpiar filtros">\n                    <i class="fas fa-times"></i>\n                </button>\n            </span>\n        `,n.querySelector(".clear-filters-btn").addEventListener("click",()=>{this.clearFilters()})}hideFilteredCount(){const e=document.querySelector(".filtered-counter");e&&(e.style.display="none")}clearFilters(){this.filters={searchText:"",status:"all",priority:""},this.elements.searchInput.value="",this.elements.priorityFilter.value="",this.elements.filterButtons.forEach(e=>{e.textContent.includes("Todas")?e.classList.add("active"):e.classList.remove("active")}),this.hideFilteredCount(),this.renderTodos()}filterTodos(e){this.filters.searchText=e.toLowerCase().trim(),this.applyFilters()}filterByPriority(e){this.filters.priority=e,this.applyFilters()}updateUI(){this.clearFilters(),this.elements.currentProjectTitle.innerHTML=`\n            <i class="fas fa-${this.getProjectIcon(this.currentProject.name)}"></i>\n            ${this.currentProject.name}\n        `,this.renderTodos(),this.renderProjects()}}let oe,re;function ie(){const t=new n,a=t.addProject("Trabajo"),o=t.addProject("Personal"),r=new e("Bienvenido a Todo List","Esta es tu primera tarea en el proyecto Inbox",new Date,"medium");t.defaultProject.addTodo(r);const i=new e("Revisar emails","Responder emails importantes",new Date(Date.now()+864e5),"high");a.addTodo(i);const s=new e("Comprar supermercado","Leche, pan, frutas",new Date(Date.now()+1728e5),"medium");return o.addTodo(s),t}console.log("üöÄ Iniciando Todo List - Interfaz Completa");let se=null,de=!1;function ce(){const e=document.getElementById("todoModal");e?.classList.remove("active"),se=null,de=!1,document.getElementById("modalTitle").textContent="Nueva Tarea",document.getElementById("todoForm")?.reset()}function le(e){if(se=e.id,de=!0,document.getElementById("todoTitle").value=e.title,document.getElementById("todoDescription").value=e.description||"",e.dueDate){const t=new Date(e.dueDate).toISOString().split("T")[0];document.getElementById("todoDueDate").value=t}else document.getElementById("todoDueDate").value="";document.getElementById("todoPriority").value=e.priority||"medium",document.getElementById("todoNotes").value=e.notes||"",document.getElementById("todoReminder").checked=e.reminder||!1,document.getElementById("modalTitle").textContent="Editar Tarea",document.getElementById("todoModal").classList.add("active"),document.getElementById("todoTitle").focus()}function ue(t){t.preventDefault();const n=document.getElementById("todoTitle").value.trim(),a=document.getElementById("todoDescription").value.trim(),o=document.getElementById("todoDueDate").value,r=document.getElementById("todoPriority").value,i=document.getElementById("todoNotes").value.trim(),s=document.getElementById("todoReminder").checked;if(!n)return alert("El t√≠tulo es obligatorio"),void document.getElementById("todoTitle").focus();try{de&&se?(function(e,t){const n=oe.currentProject.todos.find(t=>t.id===e);if(!n)throw new Error("Tarea no encontrada");n.title=t.title,n.description=t.description,n.dueDate=t.dueDate?new Date(t.dueDate):null,n.priority=t.priority,n.notes=t.notes,n.reminder=t.reminder,n.updatedAt=new Date,re.renderTodos(),re.renderProjects()}(se,{title:n,description:a,dueDate:o,priority:r,notes:i,reminder:s}),console.log("‚úèÔ∏è Tarea actualizada")):(function(t,n,a,o,r,i){const s=new e(t,n,a?new Date(a):null,o,r,i);oe.currentProject.addTodo(s),re.renderTodos(),re.renderProjects()}(n,a,o,r,i,s),console.log("‚úÖ Tarea creada")),ce()}catch(e){console.error("‚ùå Error al guardar tarea:",e),alert("Error al guardar la tarea: "+e.message)}}document.addEventListener("DOMContentLoaded",()=>{(function(){try{const e=function(){try{const e=localStorage.getItem(a);return e?JSON.parse(e):null}catch(e){return console.error("Error CARGANDO desde localStorage:",e),null}}();if(e&&e.projects&&e.projects.length>0){console.log("üìÇ Cargando datos guardados...");try{oe=n.fromJSON(e),console.log("‚úÖ Datos cargados correctamente")}catch(e){console.error("‚ùå Error al cargar datos guardados:",e),oe=ie()}}else console.log("üÜï Creando nueva aplicaci√≥n..."),oe=ie(),console.log("‚úÖ Datos de ejemplo creados")}catch(e){console.error("‚ùå Error al cargar/crear aplicaci√≥n:",e),oe=ie()}try{re=new ae(oe),console.log("‚úÖ Interfaz inicializada")}catch(e){console.error("‚ùå Error al inicializar interfaz:",e)}setInterval(()=>{oe&&o(oe.toJSON())},1e4),window.addEventListener("beforeunload",()=>{oe&&o(oe.toJSON())}),window.todoApp=oe,window.uiManager=re,console.log("\nüéâ APLICACI√ìN LISTA"),console.log("üìä Puedes acceder desde consola:"),console.log("   - todoApp ‚Üí Objeto principal"),console.log("   - uiManager ‚Üí Gestor de interfaz")})(),function(){const e=document.getElementById("todoModal"),t=document.getElementById("todoForm"),n=document.getElementById("closeModalBtn"),a=document.getElementById("cancelTodoBtn");e&&t?(n?.addEventListener("click",ce),a?.addEventListener("click",ce),e.addEventListener("click",t=>{t.target===e&&ce()}),t.addEventListener("submit",ue),document.addEventListener("keydown",t=>{"Escape"===t.key&&e.classList.contains("active")&&ce()})):console.error("‚ùå Elementos del modal no encontrados")}(),window.openTodoModalForEdit=le,console.log("‚úÖ Modal handlers configurados")})}},e=>{e(e.s=5)}]);